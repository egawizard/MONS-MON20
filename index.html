<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MON-20 Minimal Mint Test</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.4/dist/ethers.min.js"></script>
</head>
<body style="font-family:sans-serif; padding:20px;">
  <h2>MON-20 Mint Test</h2>
  
  <button onclick="connectWallet()">Connect Wallet</button>
  <p id="wallet">Not connected</p>
  
  <input id="amt" type="number" value="1000" />
  <button onclick="mint()">Mint</button>
  
  <pre id="log"></pre>
  
<script>
let signer;

async function connectWallet() {
  if (!window.ethereum) {
    alert("MetaMask not found!");
    return;
  }
  try {
    const provider = new ethers.BrowserProvider(window.ethereum);
    await provider.send("eth_requestAccounts", []);
    signer = await provider.getSigner();
    const addr = await signer.getAddress();
    document.getElementById("wallet").innerText = "Connected: " + addr;
    log("Wallet connected: " + addr);
  } catch (err) {
    log("Connect error: " + err.message);
  }
}

async function mint() {
  if (!signer) {
    alert("Connect wallet first!");
    return;
  }
  try {
    const addr = await signer.getAddress();
    const amt = document.getElementById("amt").value;
    const inscription = {
      p: "mon-20",
      op: "mint",
      tick: "MONS",
      amt: amt.toString()
    };
    
    const tx = await signer.sendTransaction({
      to: addr,
      value: 0,
      data: ethers.hexlify(ethers.toUtf8Bytes(JSON.stringify(inscription)))
    });
    
    log("Tx sent: " + tx.hash);
    const receipt = await tx.wait();
    log("Tx confirmed in block " + receipt.blockNumber);
  } catch (err) {
    log("Mint error: " + err.message);
  }
}

function log(msg) {
  document.getElementById("log").innerText += msg + "\n";
}
</script>
</body>
</html>
