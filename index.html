<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MON-20 | First Inscription Token on MONAD</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/4.2.2/web3.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 50%, #2d1b69 100%);
            color: #ffffff;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                radial-gradient(circle at 20% 20%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(119, 198, 255, 0.3) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0px, 0px) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
        }

        .logo {
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4, #45b7d1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(255, 107, 107, 0.3);
        }

        .subtitle {
            font-size: 1.2rem;
            color: #a0a0ff;
            margin-bottom: 20px;
        }

        .ticker-info {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .ticker-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .ticker-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .ticker-label {
            font-size: 0.9rem;
            color: #a0a0ff;
            margin-bottom: 5px;
        }

        .ticker-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffffff;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .label {
            display: block;
            margin-bottom: 8px;
            color: #a0a0ff;
            font-weight: 500;
        }

        .input {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .input:focus {
            outline: none;
            border-color: #4ecdc4;
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.3);
        }

        .button {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .button-primary {
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
            color: white;
        }

        .button-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.4);
        }

        .button-secondary {
            background: linear-gradient(135deg, #45b7d1, #96c93f);
            color: white;
        }

        .button-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(69, 183, 209, 0.4);
        }

        .button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .status {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
        }

        .status-success {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid #4CAF50;
            color: #4CAF50;
        }

        .status-error {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid #F44336;
            color: #F44336;
        }

        .status-info {
            background: rgba(33, 150, 243, 0.2);
            border: 1px solid #2196F3;
            color: #2196F3;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .wallet-info {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer {
            text-align: center;
            padding: 40px 0;
            color: #a0a0ff;
        }

        .footer a {
            color: #4ecdc4;
            text-decoration: none;
            font-weight: bold;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .network-info {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid #FFC107;
            color: #FFC107;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #4ecdc4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .logo {
                font-size: 2.5rem;
            }
            
            .ticker-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(78, 205, 196, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(78, 205, 196, 0); }
            100% { box-shadow: 0 0 0 0 rgba(78, 205, 196, 0); }
        }
    </style>
</head>
<body>
    <div class="background-animation"></div>
    
    <div class="container">
        <div class="header">
            <h1 class="logo">MON-20</h1>
            <p class="subtitle">The First Inscription Token on MONAD Testnet</p>
            
            <div class="ticker-info">
                <div class="ticker-grid">
                    <div class="ticker-item">
                        <div class="ticker-label">Ticker</div>
                        <div class="ticker-value">$MONS</div>
                    </div>
                    <div class="ticker-item">
                        <div class="ticker-label">Max Supply</div>
                        <div class="ticker-value">21,000,000</div>
                    </div>
                    <div class="ticker-item">
                        <div class="ticker-label">Per Mint</div>
                        <div class="ticker-value">1,000 MONS</div>
                    </div>
                    <div class="ticker-item">
                        <div class="ticker-label">Decimals</div>
                        <div class="ticker-value">18</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="network-info">
            <strong>MONAD Testnet</strong> | Chain ID: 10143 | Contract: 0x07169f0F890C3595421512D98DC79b8bce6E5fA6
        </div>

        <div class="main-content">
            <div class="card">
                <h2 class="card-title">🚀 Mint $MONS</h2>
                
                <div class="input-group">
                    <label class="label">Amount to Mint (max 1,000 per transaction)</label>
                    <input type="number" id="mintAmount" class="input" placeholder="1000" min="1" max="1000" value="1000">
                </div>

                <button id="connectWallet" class="button button-primary">Connect Wallet</button>
                <button id="mintButton" class="button button-secondary" style="display: none;" disabled>Mint MONS</button>

                <div id="walletInfo" class="wallet-info" style="display: none;">
                    <div><strong>Address:</strong> <span id="walletAddress"></span></div>
                    <div><strong>Balance:</strong> <span id="walletBalance"></span> MONS</div>
                </div>

                <div id="mintStatus"></div>
            </div>

            <div class="card">
                <h2 class="card-title">📊 Minting Progress</h2>
                
                <div class="ticker-item">
                    <div class="ticker-label">Total Minted</div>
                    <div class="ticker-value" id="totalMinted">Loading...</div>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                </div>

                <div class="ticker-grid">
                    <div class="ticker-item">
                        <div class="ticker-label">Minted</div>
                        <div class="ticker-value" id="mintedAmount">0</div>
                    </div>
                    <div class="ticker-item">
                        <div class="ticker-label">Remaining</div>
                        <div class="ticker-value" id="remainingAmount">21,000,000</div>
                    </div>
                    <div class="ticker-item">
                        <div class="ticker-label">Holders</div>
                        <div class="ticker-value" id="holdersCount">0</div>
                    </div>
                    <div class="ticker-item">
                        <div class="ticker-label">Progress</div>
                        <div class="ticker-value" id="mintProgress">0%</div>
                    </div>
                </div>

                <button id="refreshData" class="button button-primary">Refresh Data</button>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">💸 Transfer MONS</h2>
            
            <div class="input-group">
                <label class="label">Recipient Address</label>
                <input type="text" id="transferTo" class="input" placeholder="0x...">
            </div>

            <div class="input-group">
                <label class="label">Amount to Transfer</label>
                <input type="number" id="transferAmount" class="input" placeholder="100" min="1">
            </div>

            <button id="transferButton" class="button button-secondary" disabled>Transfer MONS</button>
            
            <div id="transferStatus"></div>
        </div>
    </div>

    <div class="footer">
        <p>Created by <a href="https://x.com/ega_2ez4crypto" target="_blank">@ega_2ez4crypto</a></p>
        <p>Contract: 0x07169f0F890C3595421512D98DC79b8bce6E5fA6</p>
        <p>Join the MONAD community and be part of the first MON-20 inscription token!</p>
    </div>

    <script>
        // Contract ABI and configuration
        const CONTRACT_ADDRESS = '0x07169f0F890C3595421512D98DC79b8bce6E5fA6';
        const CHAIN_ID = 10143;
        const RPC_URL = 'https://testnet-rpc.monad.xyz';
        const TICKER = 'MONS';

        const CONTRACT_ABI = [
            {
                "inputs": [],
                "stateMutability": "nonpayable",
                "type": "constructor"
            },
            {
                "anonymous": false,
                "inputs": [
                    {
                        "indexed": true,
                        "internalType": "string",
                        "name": "tick",
                        "type": "string"
                    },
                    {
                        "indexed": false,
                        "internalType": "uint256",
                        "name": "maxSupply",
                        "type": "uint256"
                    },
                    {
                        "indexed": false,
                        "internalType": "uint256",
                        "name": "limitPerMint",
                        "type": "uint256"
                    },
                    {
                        "indexed": false,
                        "internalType": "address",
                        "name": "deployer",
                        "type": "address"
                    }
                ],
                "name": "Deploy",
                "type": "event"
            },
            {
                "anonymous": false,
                "inputs": [
                    {
                        "indexed": true,
                        "internalType": "address",
                        "name": "user",
                        "type": "address"
                    },
                    {
                        "indexed": true,
                        "internalType": "string",
                        "name": "tick",
                        "type": "string"
                    },
                    {
                        "indexed": false,
                        "internalType": "string",
                        "name": "operation",
                        "type": "string"
                    },
                    {
                        "indexed": false,
                        "internalType": "uint256",
                        "name": "amount",
                        "type": "uint256"
                    },
                    {
                        "indexed": false,
                        "internalType": "string",
                        "name": "data",
                        "type": "string"
                    },
                    {
                        "indexed": false,
                        "internalType": "uint256",
                        "name": "inscriptionNumber",
                        "type": "uint256"
                    }
                ],
                "name": "Inscribe",
                "type": "event"
            },
            {
                "inputs": [
                    {
                        "internalType": "address",
                        "name": "",
                        "type": "address"
                    },
                    {
                        "internalType": "string",
                        "name": "",
                        "type": "string"
                    }
                ],
                "name": "balances",
                "outputs": [
                    {
                        "internalType": "uint256",
                        "name": "",
                        "type": "uint256"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "deployFee",
                "outputs": [
                    {
                        "internalType": "uint256",
                        "name": "",
                        "type": "uint256"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "tick",
                        "type": "string"
                    },
                    {
                        "internalType": "uint256",
                        "name": "maxSupply",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "limitPerMint",
                        "type": "uint256"
                    }
                ],
                "name": "deployToken",
                "outputs": [],
                "stateMutability": "payable",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "address",
                        "name": "token",
                        "type": "address"
                    },
                    {
                        "internalType": "uint256",
                        "name": "amount",
                        "type": "uint256"
                    }
                ],
                "name": "emergencyWithdraw",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "address",
                        "name": "user",
                        "type": "address"
                    },
                    {
                        "internalType": "string",
                        "name": "tick",
                        "type": "string"
                    }
                ],
                "name": "getBalance",
                "outputs": [
                    {
                        "internalType": "uint256",
                        "name": "",
                        "type": "uint256"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "tick",
                        "type": "string"
                    }
                ],
                "name": "getHolders",
                "outputs": [
                    {
                        "internalType": "address[]",
                        "name": "",
                        "type": "address[]"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "tick",
                        "type": "string"
                    }
                ],
                "name": "getHoldersCount",
                "outputs": [
                    {
                        "internalType": "uint256",
                        "name": "",
                        "type": "uint256"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "tick",
                        "type": "string"
                    }
                ],
                "name": "getMintProgress",
                "outputs": [
                    {
                        "internalType": "uint256",
                        "name": "minted",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "maxSupply",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "percentage",
                        "type": "uint256"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "tick",
                        "type": "string"
                    }
                ],
                "name": "getTokenInfo",
                "outputs": [
                    {
                        "internalType": "uint256",
                        "name": "maxSupply",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "limitPerMint",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "minted",
                        "type": "uint256"
                    },
                    {
                        "internalType": "address",
                        "name": "deployer",
                        "type": "address"
                    },
                    {
                        "internalType": "uint256",
                        "name": "holdersCount",
                        "type": "uint256"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "tick",
                        "type": "string"
                    }
                ],
                "name": "getTotalMinted",
                "outputs": [
                    {
                        "internalType": "uint256",
                        "name": "",
                        "type": "uint256"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "",
                        "type": "string"
                    },
                    {
                        "internalType": "uint256",
                        "name": "",
                        "type": "uint256"
                    }
                ],
                "name": "holders",
                "outputs": [
                    {
                        "internalType": "address",
                        "name": "",
                        "type": "address"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "inscriptionCounter",
                "outputs": [
                    {
                        "internalType": "uint256",
                        "name": "",
                        "type": "uint256"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "",
                        "type": "string"
                    },
                    {
                        "internalType": "address",
                        "name": "",
                        "type": "address"
                    }
                ],
                "name": "isHolder",
                "outputs": [
                    {
                        "internalType": "bool",
                        "name": "",
                        "type": "bool"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "tick",
                        "type": "string"
                    },
                    {
                        "internalType": "uint256",
                        "name": "amount",
                        "type": "uint256"
                    }
                ],
                "name": "mint",
                "outputs": [],
                "stateMutability": "payable",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "mintFee",
                "outputs": [
                    {
                        "internalType": "uint256",
                        "name": "",
                        "type": "uint256"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "owner",
                "outputs": [
                    {
                        "internalType": "address",
                        "name": "",
                        "type": "address"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "uint256",
                        "name": "newFee",
                        "type": "uint256"
                    }
                ],
                "name": "setDeployFee",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "uint256",
                        "name": "newFee",
                        "type": "uint256"
                    }
                ],
                "name": "setMintFee",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "",
                        "type": "string"
                    }
                ],
                "name": "tokens",
                "outputs": [
                    {
                        "internalType": "uint256",
                        "name": "maxSupply",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "limitPerMint",
                        "type": "uint256"
                    },
                    {
                        "internalType": "address",
                        "name": "deployer",
                        "type": "address"
                    },
                    {
                        "internalType": "bool",
                        "name": "exists",
                        "type": "bool"
                    },
                    {
                        "internalType": "uint256",
                        "name": "deployedAt",
                        "type": "uint256"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "",
                        "type": "string"
                    }
                ],
                "name": "totalMinted",
                "outputs": [
                    {
                        "internalType": "uint256",
                        "name": "",
                        "type": "uint256"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "address",
                        "name": "to",
                        "type": "address"
                    },
                    {
                        "internalType": "string",
                        "name": "tick",
                        "type": "string"
                    },
                    {
                        "internalType": "uint256",
                        "name": "amount",
                        "type": "uint256"
                    }
                ],
                "name": "transfer",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "withdraw",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "stateMutability": "payable",
                "type": "receive"
            }
        ];

        let web3;
        let contract;
        let userAccount;

        // Initialize Web3
        async function initWeb3() {
            if (typeof window.ethereum !== 'undefined') {
                web3 = new Web3(window.ethereum);
                contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
            } else {
                web3 = new Web3(RPC_URL);
                contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
            }
        }

        // Connect Wallet
        async function connectWallet() {
            if (typeof window.ethereum === 'undefined') {
                showStatus('mintStatus', 'Please install MetaMask or another Web3 wallet!', 'error');
                return;
            }

            try {
                showStatus('mintStatus', 'Connecting wallet...', 'info');
                
                const accounts = await window.ethereum.request({
                    method: 'eth_requestAccounts'
                });

                // Switch to MONAD testnet
                try {
                    await window.ethereum.request({
                        method: 'wallet_switchEthereumChain',
                        params: [{ chainId: '0x' + CHAIN_ID.toString(16) }],
                    });
                } catch (switchError) {
                    if (switchError.code === 4902) {
                        await window.ethereum.request({
                            method: 'wallet_addEthereumChain',
                            params: [{
                                chainId: '0x' + CHAIN_ID.toString(16),
                                chainName: 'MONAD Testnet',
                                nativeCurrency: {
                                    name: 'MONAD',
                                    symbol: 'MONAD',
                                    decimals: 18
                                },
                                rpcUrls: [RPC_URL],
                                blockExplorerUrls: ['https://testnet-explorer.monad.xyz']
                            }]
                        });
                    }
                }

                userAccount = accounts[0];
                document.getElementById('connectWallet').style.display = 'none';
                document.getElementById('mintButton').style.display = 'block';
                document.getElementById('mintButton').disabled = false;
                document.getElementById('transferButton').disabled = false;
                document.getElementById('walletInfo').style.display = 'block';
                
                updateWalletInfo();
                showStatus('mintStatus', 'Wallet connected successfully!', 'success');

            } catch (error) {
                console.error('Connection failed:', error);
                showStatus('mintStatus', 'Failed to connect wallet: ' + error.message, 'error');
            }
        }

        // Update wallet information
        async function updateWalletInfo() {
            if (!userAccount) return;

            document.getElementById('walletAddress').textContent = 
                userAccount.substring(0, 6) + '...' + userAccount.substring(38);

            try {
                const balance = await contract.methods.getBalance(userAccount, TICKER).call();
                const formattedBalance = formatNumber(web3.utils.fromWei(balance, 'ether'));
                document.getElementById('walletBalance').textContent = formattedBalance;
            } catch (error) {
                document.getElementById('walletBalance').textContent = '0';
            }
        }

        // Mint tokens
        async function mint() {
            if (!userAccount) {
                showStatus('mintStatus', 'Please connect your wallet first!', 'error');
                return;
            }

            const amount = parseInt(document.getElementById('mintAmount').value);
            
            if (!amount || amount < 1 || amount > 1000) {
                showStatus('mintStatus', 'Please enter a valid amount (1-1000 MONS)', 'error');
                return;
            }

            try {
                document.getElementById('mintButton').disabled = true;
                document.getElementById('mintButton').innerHTML = '<div class="loading"></div>Minting...';
                showStatus('mintStatus', 'Processing mint transaction...', 'info');

                const mintFee = await contract.methods.mintFee().call();
                const amountInWei = web3.utils.toWei(amount.toString(), 'ether');

                const gasEstimate = await contract.methods.mint(TICKER, amountInWei).estimateGas({
                    from: userAccount,
                    value: mintFee
                });

                const tx = await contract.methods.mint(TICKER, amountInWei).send({
                    from: userAccount,
                    value: mintFee,
                    gas: Math.floor(gasEstimate * 1.2)
                });

                showStatus('mintStatus', `Successfully minted ${amount} MONS! Transaction: ${tx.transactionHash}`, 'success');
                updateWalletInfo();
                loadTokenData();

            } catch (error) {
                console.error('Mint failed:', error);
                showStatus('mintStatus', 'Mint failed: ' + (error.message || 'Unknown error'), 'error');
            } finally {
                document.getElementById('mintButton').disabled = false;
                document.getElementById('mintButton').innerHTML = 'Mint MONS';
            }
        }

        // Transfer tokens
        async function transfer() {
            if (!userAccount) {
                showStatus('transferStatus', 'Please connect your wallet first!', 'error');
                return;
            }

            const to = document.getElementById('transferTo').value;
            const amount = parseInt(document.getElementById('transferAmount').value);

            if (!to || !web3.utils.isAddress(to)) {
                showStatus('transferStatus', 'Please enter a valid recipient address!', 'error');
                return;
            }

            if (!amount || amount < 1) {
                showStatus('transferStatus', 'Please enter a valid amount!', 'error');
                return;
            }

            try {
                document.getElementById('transferButton').disabled = true;
                document.getElementById('transferButton').innerHTML = '<div class="loading"></div>Transferring...';
                showStatus('transferStatus', 'Processing transfer transaction...', 'info');

                const amountInWei = web3.utils.toWei(amount.toString(), 'ether');

                const gasEstimate = await contract.methods.transfer(to, TICKER, amountInWei).estimateGas({
                    from: userAccount
                });

                const tx = await contract.methods.transfer(to, TICKER, amountInWei).send({
                    from: userAccount,
                    gas: Math.floor(gasEstimate * 1.2)
                });

                showStatus('transferStatus', `Successfully transferred ${amount} MONS! Transaction: ${tx.transactionHash}`, 'success');
                updateWalletInfo();
                loadTokenData();

                // Clear form
                document.getElementById('transferTo').value = '';
                document.getElementById('transferAmount').value = '';

            } catch (error) {
                console.error('Transfer failed:', error);
                showStatus('transferStatus', 'Transfer failed: ' + (error.message || 'Unknown error'), 'error');
            } finally {
                document.getElementById('transferButton').disabled = false;
                document.getElementById('transferButton').innerHTML = 'Transfer MONS';
            }
        }

        // Load token data
        async function loadTokenData() {
            try {
                const tokenInfo = await contract.methods.getTokenInfo(TICKER).call();
                const maxSupply = parseInt(web3.utils.fromWei(tokenInfo.maxSupply, 'ether'));
                const minted = parseInt(web3.utils.fromWei(tokenInfo.minted, 'ether'));
                const holdersCount = parseInt(tokenInfo.holdersCount);

                const remaining = maxSupply - minted;
                const percentage = maxSupply > 0 ? ((minted / maxSupply) * 100).toFixed(2) : 0;

                document.getElementById('totalMinted').textContent = formatNumber(minted);
                document.getElementById('mintedAmount').textContent = formatNumber(minted);
                document.getElementById('remainingAmount').textContent = formatNumber(remaining);
                document.getElementById('holdersCount').textContent = formatNumber(holdersCount);
                document.getElementById('mintProgress').textContent = percentage + '%';
                
                // Update progress bar
                document.getElementById('progressBar').style.width = percentage + '%';

                // Add pulse effect when near completion
                const progressBar = document.getElementById('progressBar');
                if (percentage > 90) {
                    progressBar.classList.add('pulse');
                } else {
                    progressBar.classList.remove('pulse');
                }

            } catch (error) {
                console.error('Failed to load token data:', error);
            }
        }

        // Show status message
        function showStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.innerHTML = message;
            element.className = `status status-${type}`;
            element.style.display = 'block';
            
            if (type === 'success') {
                setTimeout(() => {
                    element.style.display = 'none';
                }, 5000);
            }
        }

        // Format numbers with commas
        function formatNumber(num) {
            return parseInt(num).toLocaleString();
        }

        // Event listeners
        document.getElementById('connectWallet').addEventListener('click', connectWallet);
        document.getElementById('mintButton').addEventListener('click', mint);
        document.getElementById('transferButton').addEventListener('click', transfer);
        document.getElementById('refreshData').addEventListener('click', loadTokenData);

        // Validate mint amount
        document.getElementById('mintAmount').addEventListener('input', function() {
            const value = parseInt(this.value);
            if (value > 1000) {
                this.value = 1000;
                showStatus('mintStatus', 'Maximum 1000 MONS per mint!', 'error');
            } else if (value < 1 && this.value !== '') {
                this.value = 1;
            }
        });

        // Initialize on page load
        window.addEventListener('load', async () => {
            await initWeb3();
            await loadTokenData();
            
            // Auto-refresh data every 30 seconds
            setInterval(loadTokenData, 30000);
            
            // Check if wallet is already connected
            if (typeof window.ethereum !== 'undefined') {
                const accounts = await window.ethereum.request({ method: 'eth_accounts' });
                if (accounts.length > 0) {
                    userAccount = accounts[0];
                    document.getElementById('connectWallet').style.display = 'none';
                    document.getElementById('mintButton').style.display = 'block';
                    document.getElementById('mintButton').disabled = false;
                    document.getElementById('transferButton').disabled = false;
                    document.getElementById('walletInfo').style.display = 'block';
                    updateWalletInfo();
                }
            }
        });

        // Handle account changes
        if (typeof window.ethereum !== 'undefined') {
            window.ethereum.on('accountsChanged', (accounts) => {
                if (accounts.length > 0) {
                    userAccount = accounts[0];
                    updateWalletInfo();
                } else {
                    userAccount = null;
                    document.getElementById('connectWallet').style.display = 'block';
                    document.getElementById('mintButton').style.display = 'none';
                    document.getElementById('transferButton').disabled = true;
                    document.getElementById('walletInfo').style.display = 'none';
                }
            });

            window.ethereum.on('chainChanged', () => {
                window.location.reload();
            });
        }
    </script>
